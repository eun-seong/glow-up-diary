---
date: 2024-08-13
today:
---
# 파일 메타 정보 저장

클라우드 스토리이제 파일을 저장하고 있다. 파일만 스토리지에 저장하고, 메타 정보는 일절 저장하고 있지 않았는데 화면에서 용량과 파일 이름 등 필요한 몇 가지 메타데이터가 있었다.

파일을 업로드하는 것과 다운로드 하는 것 모두 채팅에서 이루어지기 때문에 채팅 메세지에 url을 저장하면서 메타데이터도 함께 저장할까 했는데, 너무 번거롭기도 하고 DB에 저장하는 것도 아니고 firestore에 저장하는 게 맞지 않는 것 같아 다른 방법을 찾아보았다.

그 중 가장 나은 방법은 `HEAD` http 메소드를 사용하는 것이다.
사용하고 있는 SaaS가 해당 메소드를 지원해서 이 방법이 가능하다.

url에 파일이름과 확장자를 저장할 것이고, 헤더의 데이터 확인해보니 파일 크기과 마지막 수정 날짜 등 모두 알 수 있었다.

### octet-stream
헤더 중 처음 보는 게 있었는데, `Content-Type : application/octet-stream` 이었다.
otctet-stream은 8비트로 된 데이터라는 뜻이다.
즉, 이 MIME 타입으로 표시될 수 있는 파일 확장자는 거의 무한이다.
내가 업로드했던 파일은 pdf였지만, png, jpg 와 같은 엄청나게 널리 사용되고 있지 않는 파일들은 거의 대부분 여기에 해당할 듯 하다.

